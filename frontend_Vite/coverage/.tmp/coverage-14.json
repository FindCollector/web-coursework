{"/Users/huyanjie/Documents/fitness_centres/frontend_Vite/src/components/DraggableTag.jsx":{"path":"/Users/huyanjie/Documents/fitness_centres/frontend_Vite/src/components/DraggableTag.jsx","statementMap":{"0":{"start":{"line":6,"column":19},"end":{"line":18,"column":1}},"1":{"start":{"line":19,"column":21},"end":{"line":149,"column":1}},"2":{"start":{"line":20,"column":14},"end":{"line":20,"column":26}},"3":{"start":{"line":21,"column":36},"end":{"line":21,"column":51}},"4":{"start":{"line":22,"column":2},"end":{"line":25,"column":18}},"5":{"start":{"line":23,"column":4},"end":{"line":24,"column":5}},"6":{"start":{"line":26,"column":33},"end":{"line":43,"column":4}},"7":{"start":{"line":29,"column":6},"end":{"line":34,"column":8}},"8":{"start":{"line":37,"column":22},"end":{"line":37,"column":39}},"9":{"start":{"line":38,"column":25},"end":{"line":38,"column":48}},"10":{"start":{"line":40,"column":27},"end":{"line":42,"column":5}},"11":{"start":{"line":44,"column":29},"end":{"line":71,"column":4}},"12":{"start":{"line":47,"column":6},"end":{"line":49,"column":7}},"13":{"start":{"line":48,"column":8},"end":{"line":48,"column":15}},"14":{"start":{"line":50,"column":24},"end":{"line":50,"column":34}},"15":{"start":{"line":51,"column":25},"end":{"line":51,"column":30}},"16":{"start":{"line":52,"column":25},"end":{"line":52,"column":40}},"17":{"start":{"line":53,"column":25},"end":{"line":53,"column":29}},"18":{"start":{"line":54,"column":6},"end":{"line":56,"column":7}},"19":{"start":{"line":55,"column":8},"end":{"line":55,"column":15}},"20":{"start":{"line":57,"column":32},"end":{"line":57,"column":67}},"21":{"start":{"line":58,"column":27},"end":{"line":58,"column":81}},"22":{"start":{"line":59,"column":27},"end":{"line":59,"column":52}},"23":{"start":{"line":60,"column":27},"end":{"line":60,"column":65}},"24":{"start":{"line":61,"column":6},"end":{"line":63,"column":7}},"25":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"26":{"start":{"line":64,"column":6},"end":{"line":64,"column":69}},"27":{"start":{"line":65,"column":6},"end":{"line":65,"column":30}},"28":{"start":{"line":66,"column":6},"end":{"line":66,"column":35}},"29":{"start":{"line":68,"column":27},"end":{"line":70,"column":5}},"30":{"start":{"line":72,"column":2},"end":{"line":72,"column":18}},"31":{"start":{"line":73,"column":22},"end":{"line":76,"column":3}},"32":{"start":{"line":74,"column":23},"end":{"line":74,"column":49}},"33":{"start":{"line":75,"column":4},"end":{"line":75,"column":34}},"34":{"start":{"line":77,"column":19},"end":{"line":89,"column":3}},"35":{"start":{"line":90,"column":27},"end":{"line":90,"column":51}},"36":{"start":{"line":90,"column":33},"end":{"line":90,"column":51}},"37":{"start":{"line":91,"column":27},"end":{"line":91,"column":52}},"38":{"start":{"line":91,"column":33},"end":{"line":91,"column":52}},"39":{"start":{"line":92,"column":21},"end":{"line":92,"column":65}},"40":{"start":{"line":93,"column":2},"end":{"line":148,"column":4}},"41":{"start":{"line":112,"column":16},"end":{"line":112,"column":51}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":19,"column":21},"end":{"line":19,"column":22}},"loc":{"start":{"line":19,"column":72},"end":{"line":149,"column":1}},"line":19},"1":{"name":"(anonymous_1)","decl":{"start":{"line":22,"column":12},"end":{"line":22,"column":13}},"loc":{"start":{"line":22,"column":18},"end":{"line":25,"column":3}},"line":22},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":10},"end":{"line":28,"column":11}},"loc":{"start":{"line":28,"column":16},"end":{"line":35,"column":5}},"line":28},"3":{"name":"(anonymous_3)","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":10}},"loc":{"start":{"line":36,"column":28},"end":{"line":39,"column":5}},"line":36},"4":{"name":"(anonymous_4)","decl":{"start":{"line":40,"column":13},"end":{"line":40,"column":14}},"loc":{"start":{"line":40,"column":27},"end":{"line":42,"column":5}},"line":40},"5":{"name":"(anonymous_5)","decl":{"start":{"line":46,"column":11},"end":{"line":46,"column":12}},"loc":{"start":{"line":46,"column":30},"end":{"line":67,"column":5}},"line":46},"6":{"name":"(anonymous_6)","decl":{"start":{"line":68,"column":13},"end":{"line":68,"column":14}},"loc":{"start":{"line":68,"column":27},"end":{"line":70,"column":5}},"line":68},"7":{"name":"(anonymous_7)","decl":{"start":{"line":73,"column":22},"end":{"line":73,"column":23}},"loc":{"start":{"line":73,"column":28},"end":{"line":76,"column":3}},"line":73},"8":{"name":"(anonymous_8)","decl":{"start":{"line":90,"column":27},"end":{"line":90,"column":28}},"loc":{"start":{"line":90,"column":33},"end":{"line":90,"column":51}},"line":90},"9":{"name":"(anonymous_9)","decl":{"start":{"line":91,"column":27},"end":{"line":91,"column":28}},"loc":{"start":{"line":91,"column":33},"end":{"line":91,"column":52}},"line":91},"10":{"name":"(anonymous_10)","decl":{"start":{"line":111,"column":23},"end":{"line":111,"column":24}},"loc":{"start":{"line":111,"column":29},"end":{"line":113,"column":15}},"line":111}},"branchMap":{"0":{"loc":{"start":{"line":23,"column":4},"end":{"line":24,"column":5}},"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":24,"column":5}},{"start":{},"end":{}}],"line":23},"1":{"loc":{"start":{"line":47,"column":6},"end":{"line":49,"column":7}},"type":"if","locations":[{"start":{"line":47,"column":6},"end":{"line":49,"column":7}},{"start":{},"end":{}}],"line":47},"2":{"loc":{"start":{"line":54,"column":6},"end":{"line":56,"column":7}},"type":"if","locations":[{"start":{"line":54,"column":6},"end":{"line":56,"column":7}},{"start":{},"end":{}}],"line":54},"3":{"loc":{"start":{"line":54,"column":10},"end":{"line":54,"column":63}},"type":"binary-expr","locations":[{"start":{"line":54,"column":10},"end":{"line":54,"column":34}},{"start":{"line":54,"column":38},"end":{"line":54,"column":63}}],"line":54},"4":{"loc":{"start":{"line":61,"column":6},"end":{"line":63,"column":7}},"type":"if","locations":[{"start":{"line":61,"column":6},"end":{"line":63,"column":7}},{"start":{},"end":{}}],"line":61},"5":{"loc":{"start":{"line":61,"column":10},"end":{"line":61,"column":120}},"type":"binary-expr","locations":[{"start":{"line":61,"column":10},"end":{"line":61,"column":32}},{"start":{"line":61,"column":36},"end":{"line":61,"column":63}},{"start":{"line":61,"column":67},"end":{"line":61,"column":89}},{"start":{"line":61,"column":93},"end":{"line":61,"column":120}}],"line":61},"6":{"loc":{"start":{"line":79,"column":13},"end":{"line":79,"column":33}},"type":"cond-expr","locations":[{"start":{"line":79,"column":26},"end":{"line":79,"column":29}},{"start":{"line":79,"column":32},"end":{"line":79,"column":33}}],"line":79},"7":{"loc":{"start":{"line":85,"column":15},"end":{"line":85,"column":114}},"type":"cond-expr","locations":[{"start":{"line":85,"column":28},"end":{"line":85,"column":59}},{"start":{"line":85,"column":62},"end":{"line":85,"column":114}}],"line":85},"8":{"loc":{"start":{"line":85,"column":62},"end":{"line":85,"column":114}},"type":"cond-expr","locations":[{"start":{"line":85,"column":74},"end":{"line":85,"column":105}},{"start":{"line":85,"column":108},"end":{"line":85,"column":114}}],"line":85},"9":{"loc":{"start":{"line":86,"column":15},"end":{"line":86,"column":69}},"type":"cond-expr","locations":[{"start":{"line":86,"column":42},"end":{"line":86,"column":60}},{"start":{"line":86,"column":63},"end":{"line":86,"column":69}}],"line":86},"10":{"loc":{"start":{"line":86,"column":15},"end":{"line":86,"column":39}},"type":"binary-expr","locations":[{"start":{"line":86,"column":15},"end":{"line":86,"column":24}},{"start":{"line":86,"column":28},"end":{"line":86,"column":39}}],"line":86},"11":{"loc":{"start":{"line":87,"column":12},"end":{"line":87,"column":50}},"type":"cond-expr","locations":[{"start":{"line":87,"column":21},"end":{"line":87,"column":41}},{"start":{"line":87,"column":44},"end":{"line":87,"column":50}}],"line":87},"12":{"loc":{"start":{"line":92,"column":21},"end":{"line":92,"column":65}},"type":"cond-expr","locations":[{"start":{"line":92,"column":40},"end":{"line":92,"column":49}},{"start":{"line":92,"column":52},"end":{"line":92,"column":65}}],"line":92},"13":{"loc":{"start":{"line":112,"column":16},"end":{"line":112,"column":50}},"type":"binary-expr","locations":[{"start":{"line":112,"column":16},"end":{"line":112,"column":24}},{"start":{"line":112,"column":28},"end":{"line":112,"column":50}}],"line":112},"14":{"loc":{"start":{"line":117,"column":41},"end":{"line":117,"column":69}},"type":"cond-expr","locations":[{"start":{"line":117,"column":53},"end":{"line":117,"column":64}},{"start":{"line":117,"column":67},"end":{"line":117,"column":69}}],"line":117},"15":{"loc":{"start":{"line":117,"column":73},"end":{"line":117,"column":98}},"type":"cond-expr","locations":[{"start":{"line":117,"column":82},"end":{"line":117,"column":93}},{"start":{"line":117,"column":96},"end":{"line":117,"column":98}}],"line":117}},"s":{"0":1,"1":1,"2":3,"3":3,"4":3,"5":3,"6":3,"7":0,"8":0,"9":0,"10":6,"11":3,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":6,"30":3,"31":3,"32":3,"33":3,"34":3,"35":3,"36":0,"37":3,"38":0,"39":3,"40":3,"41":1},"f":{"0":3,"1":3,"2":0,"3":0,"4":6,"5":0,"6":6,"7":3,"8":0,"9":0,"10":1},"b":{"0":[0,3],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0,0],"6":[0,3],"7":[0,3],"8":[0,3],"9":[0,3],"10":[3,0],"11":[0,3],"12":[2,1],"13":[1,1],"14":[0,3],"15":[0,3]},"inputSourceMap":{"version":3,"sources":["/Users/huyanjie/Documents/fitness_centres/frontend_Vite/src/components/DraggableTag.jsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { Tag, Badge } from 'antd';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { motion } from 'framer-motion';\n\n// Define a set of colorful tag colors\nconst TAG_COLORS = [\n  'magenta', 'red', 'volcano', 'orange', 'gold',\n  'lime', 'green', 'cyan', 'blue', 'geekblue',\n  'purple'\n];\n\nconst DraggableTag = ({ tag, index, type, onMove, onRemove, style }) => {\n  const ref = useRef(null);\n  const [isHovered, setIsHovered] = useState(false);\n  \n  // Use useEffect to check if the component ref is properly initialized\n  useEffect(() => {\n    if (!ref.current) {\n      // Tag ref not initialized\n    }\n  }, [tag, type]);\n  \n  const [{ isDragging }, drag] = useDrag({\n    type: 'tag',\n    item: () => {\n      return { \n        id: tag.id, \n        index, \n        sourceType: type, \n        name: tag.tagName \n      };\n    },\n    end: (item, monitor) => {\n      const didDrop = monitor.didDrop();\n      const dropResult = monitor.getDropResult();\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n  \n  const [{ isOver }, drop] = useDrop({\n    accept: 'tag',\n    hover: (item, monitor) => {\n      if (!ref.current) {\n        return;\n      }\n      \n      const dragIndex = item.index;\n      const hoverIndex = index;\n      const sourceType = item.sourceType;\n      const targetType = type;\n      \n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex && sourceType === targetType) {\n        return;\n      }\n      \n      // Get mouse position information for more accurate dragging\n      const hoverBoundingRect = ref.current.getBoundingClientRect();\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      const clientOffset = monitor.getClientOffset();\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n      \n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n      if (\n        (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) ||\n        (dragIndex > hoverIndex && hoverClientY > hoverMiddleY)\n      ) {\n        return;\n      }\n      \n      // Call onMove function to handle the movement logic\n      onMove(dragIndex, hoverIndex, sourceType, targetType, item.id);\n      \n      // Update the index and sourceType for the dragged item\n      item.index = hoverIndex;\n      item.sourceType = targetType;\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n    }),\n  });\n  \n  // Apply drag and drop to the same ref\n  drag(drop(ref));\n  \n  // Determine tag color based on tag ID to ensure the same tag always has the same color\n  const getTagColor = () => {\n    // Use the tag ID to calculate the color index, ensuring consistent colors for the same ID\n    const colorIndex = tag.id % TAG_COLORS.length;\n    return TAG_COLORS[colorIndex];\n  };\n  \n  // Set style based on drag state\n  const tagStyle = {\n    cursor: 'move',\n    opacity: isDragging ? 0.5 : 1,\n    margin: '6px',\n    fontSize: '14px',\n    padding: '6px 12px',\n    borderRadius: '20px',\n    transition: 'all 0.3s ease',\n    boxShadow: isDragging \n      ? '0 5px 15px rgba(0, 0, 0, 0.2)' \n      : isHovered \n        ? '0 3px 10px rgba(0, 0, 0, 0.1)' \n        : 'none',\n    transform: isHovered && !isDragging ? 'translateY(-3px)' : 'none',\n    border: isOver ? '1px dashed #1890ff' : 'none',\n    ...style,\n  };\n  \n  // Mouse hover effects\n  const handleMouseEnter = () => setIsHovered(true);\n  const handleMouseLeave = () => setIsHovered(false);\n  \n  // Add special marker for selected tags\n  const badgeColor = type === 'coach' ? '#52c41a' : 'transparent';\n  \n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.8 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: 0.3 }}\n      data-testid={`drag-tag-${tag.id}`}\n    >\n      <Badge \n        dot={type === 'coach'} \n        color={badgeColor}\n      >\n        <Tag\n          ref={ref}\n          style={tagStyle}\n          closable={onRemove !== undefined}\n          onClose={() => {\n            onRemove && onRemove(tag.id, type);\n          }}\n          color={getTagColor()}\n          onMouseEnter={handleMouseEnter}\n          onMouseLeave={handleMouseLeave}\n          className={`rounded-full ${isHovered ? 'shadow-md' : ''} ${isOver ? 'tag-hover' : ''}`}\n        >\n          {tag.tagName}\n        </Tag>\n      </Badge>\n    </motion.div>\n  );\n};\n\nexport default DraggableTag; "],"mappings":"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","names":[]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"01656c0bbc35c37d5248d95303f10e6be110bee5"}}